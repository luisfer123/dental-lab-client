<aside class="sidebar">

  <!-- Si el usuario est치 autenticado -->
  <div *ngIf="auth.currentUser$ | async as user; else guest">

    <!-- Secci칩n principal -->
    <div class="sidebar-section">
      <button class="sidebar-btn" (click)="goTo('/trabajos/nuevo')"
        *ngIf="hasAnyRole(['ROLE_ADMIN', 'ROLE_TECHNICIAN'])">
        游뤊 Nuevo trabajo
      </button>

      <button class="sidebar-btn" (click)="goTo('/trabajos/en-proceso')"
        *ngIf="hasRole('ROLE_ADMIN')">
        丘뙖잺 Trabajos en proceso
      </button>

      <button class="sidebar-btn" (click)="goTo('/trabajos/por-asignar')"
        *ngIf="hasRole('ROLE_ADMIN')">
        游 Trabajos por asignar
      </button>

      <button class="sidebar-btn" (click)="goTo('/trabajos/por-entregar')"
        *ngIf="hasRole('ROLE_ADMIN')">
        游닍 Trabajos por entregar
      </button>
    </div>

    <!-- L칤nea divisora: solo si el usuario es ADMIN -->
    <hr class="sidebar-divider" *ngIf="hasRole('ROLE_ADMIN')" />

    <!-- Secci칩n personal -->
    <div class="sidebar-section">
      <button class="sidebar-btn" (click)="goTo('/trabajos/mis-trabajos')"
        *ngIf="hasAnyRole(['ROLE_ADMIN', 'ROLE_TECHNICIAN'])">
        游농 Mis trabajos
      </button>

      <button class="sidebar-btn" (click)="goTo('/trabajos/mis-por-entregar')"
        *ngIf="hasAnyRole(['ROLE_ADMIN', 'ROLE_TECHNICIAN'])">
        游닓 Mis trabajos por entregar
      </button>
    </div>
  </div>

  <!-- Si el usuario NO est치 autenticado -->
  <ng-template #guest>
    <div class="sidebar-guest">
      <p class="sidebar-message">
        Para ver opciones, favor de identificarse primero.
      </p>

      <button class="sidebar-btn" (click)="goTo('/auth/login')">
        游댏 Identificarse
      </button>
    </div>
  </ng-template>

</aside>
