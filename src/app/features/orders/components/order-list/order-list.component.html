<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">Órdenes</h2>

    <button class="btn btn-primary" (click)="createOrder()">
      <i class="bi bi-plus-circle me-1"></i>
      Nueva orden
    </button>
  </div>

  <!-- Error -->
  <div class="alert alert-danger" *ngIf="error()">
    {{ error() }}
  </div>

  <!-- Loading -->
  <div class="text-center text-muted" *ngIf="loading()">
    Cargando órdenes...
  </div>

  <!-- Table -->
  <div class="table-responsive" *ngIf="!loading() && orders().length">
    <table class="table table-hover table-sm">
      <thead class="table-light">
        <tr>
          <th>ID</th>
          <th>Cliente</th>
          <th>Fecha recibida</th>
          <th>Fecha entrega</th>
          <th>Status</th>
          <th style="width:120px;">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let o of orders()">
          <td>#{{ o.id }}</td>
          <td>{{ o.clientId }}</td>
          <td>{{ o.dateReceived | date:'mediumDate' }}</td>
          <td>{{ o.dueDate ? (o.dueDate | date:'mediumDate') : '-' }}</td>
          <td>{{ o.status }}</td>
          <td>
            <button class="btn btn-outline-primary btn-sm"
                    (click)="viewOrder(o.id)">
              Ver
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty state -->
  <div *ngIf="!loading() && orders().length === 0" class="alert alert-light border text-center">
    No hay órdenes para mostrar.
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages() > 1" class="d-flex justify-content-center mt-3">
    <ul class="pagination pagination-sm mb-0">
      <li class="page-item" [class.disabled]="page() === 0">
        <a class="page-link" href="#" (click)="prevPage(); $event.preventDefault()">«</a>
      </li>

      <li class="page-item"
          *ngFor="let p of [].constructor(totalPages()); let i = index"
          [class.active]="i === page()">
        <a class="page-link" href="#" (click)="goToPage(i); $event.preventDefault()">
          {{ i + 1 }}
        </a>
      </li>

      <li class="page-item" [class.disabled]="page() >= totalPages() - 1">
        <a class="page-link" href="#" (click)="nextPage(); $event.preventDefault()">»</a>
      </li>
    </ul>
  </nav>

</div>
